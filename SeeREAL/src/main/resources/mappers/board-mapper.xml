<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">
	<resultMap id="boardResultSet" type="board">
		<result column="board_no"		property="boardNo"/>
		<result column="board_title"	property="boardTitle"/>
		<result column="board_writer"	property="boardWriter"/>
		<result column="count"			property="count"/>
		<result column="enroll_date"	property="enrollDate"/>
		<result column="origin_name"	property="originName"/>
		<result column="change_name"	property="changeName"/>
		<result column="report_count"	property="reportCount"/>
		<result column="status"			property="status"/>
		<result column="board_type"		property="boardType"/>
	</resultMap>

	<select id="selectBoardListCount" resultType="_int">
	select
			count(*)
	  from
	  		board
	  where
	  		status = 'Y'
	</select>
	<select id="selectBoardList" resultMap="boardResultSet">
		select
				board_no,
				board_title,
				board_writer,
				count,
				to_char(enroll_date, 'YYYY-MM-DD') as "ENROLL_DATE",
				origin_name
		 from
				board
		where
				status = 'Y'
		  and
		  		board_type = 2
		order
		   by
		   		board_no desc
	</select>
	
	<update id="sanctionsBoard" parameterType="_int">

		update
				board
		set
				status = 'N'
		where
				report_count >= 10			
	</update>
	<insert id="insertSpoiler" parameterType="board">
		insert
		  into
		  		board
		  		(
		  		board_no,
		  		board_title,
		  		board_writer,
		  		board_content,
		  		origin_name,
		  		change_name,
		  		board_type
		  		)
		values
				(
				seq_bno.nextval,
				#{boardTitle},
				#{boardWriter},
				#{boardContent},
				#{originName},
				#{changeName},
				2
				)
	</insert>


</mapper>
